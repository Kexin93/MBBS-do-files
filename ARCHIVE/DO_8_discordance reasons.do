***MALAWI Behavioral Biases Study
***DO FILE: Discordance reasons

***KEXIN ZHANG
***November 10, 2025

version 13
clear all

use "$data\MBBS_Analysis_data.dta"

global balance_covariates "age_binary cont_use1 eff_attribute"
		
********************************************************************************************************************
******************** Changing Ideal Methods from Counseling to Fup: which group is more likely afterwards? ***********************************
****************************************************************************************************************
keep if w1_mergeRand == 3
keep if COUN__FV_1 == 1

* consent
	keep if PHO_REC_4 == 1 | HOME_REV_20 == 1 | mergeCLI == 3 //675

* Drop pregnant women at counseling
	drop if COUN_118 == 1

* Drop pregnant women at FUP
	drop if PHO_103 == 1 | HOME_103 == 1 //638

global phone_reasons PHO_111D0 PHO_111D1 PHO_111D2 PHO_111D3 PHO_111D4 PHO_111D5 PHO_111D6 PHO_111D7 PHO_111D8 PHO_111D15 PHO_111D9 PHO_111D10 PHO_111D11 PHO_111D12 PHO_111D13 PHO_111D14 PHO_111D16 PHO_111D17 PHO_111D18 PHO_111D19 PHO_111D20 PHO_111D21 PHO_111D96 PHO_111D88 PHO_111D99 PHO_111Dextra PHO_111D_O

global home_reasons HOME_111D0 HOME_111D1 HOME_111D2 HOME_111D3 HOME_111D4 HOME_111D5 HOME_111D6 HOME_111D7 HOME_111D8 HOME_111D15 HOME_111D9 HOME_111D10 HOME_111D11 HOME_111D12 HOME_111D13 HOME_111D14 HOME_111D16 HOME_111D17 HOME_111D18 HOME_111D19 HOME_111D20 HOME_111D21 HOME_111D96 HOME_111D88 HOME_111D99 HOME_111Dextra HOME_111D_O

global clinic_reasons1 CLIN_106C1 CLIN_106C2 CLIN_106C3 CLIN_106C4 CLIN_106C5 CLIN_106C6 CLIN_106C7 CLIN_106C8 CLIN_106C9 CLIN_106C10 CLIN_106C11 CLIN_106C12 CLIN_106C13 CLIN_106C14 CLIN_106C15 CLIN_106C16 CLIN_106C17 CLIN_106C18 CLIN_106C19 CLIN_106C20 CLIN_106C21 CLIN_106C22 CLIN_106C23 CLIN_106C24 CLIN_106C25 CLIN_106CW709A_2626 CLIN_106C27 CLIN_106C28 CLIN_106C96 CLIN_106C88 CLIN_106C99 CLIN_106C0 CLIN_106Cextra CLIN_106C_O

global clinic_reasons2  CLIN_107C1 CLIN_107C2 CLIN_107C3 CLIN_107C4 CLIN_107C5 CLIN_107C6 CLIN_107C7 CLIN_107C8 CLIN_107C9 CLIN_107C10 CLIN_107C11 CLIN_107C12 CLIN_107C13 CLIN_107C14 CLIN_107C15 CLIN_107C16 CLIN_107C17 CLIN_107C18 CLIN_107C19 CLIN_107C20 CLIN_107C21 CLIN_107C22 CLIN_107C23 CLIN_107C24 CLIN_107C25 CLIN_107CW709A_2626 CLIN_107C27 CLIN_107C28 CLIN_107C96 CLIN_107C88 CLIN_107C99 CLIN_107C0 CLIN_107Cextra CLIN_107C_O

global clinic_reasons3  CLIN_108C1 CLIN_108C2 CLIN_108C3 CLIN_108C4 CLIN_108C5 CLIN_108C6 CLIN_108C7 CLIN_108C8 CLIN_108C9 CLIN_108C10 CLIN_108C11 CLIN_108C12 CLIN_108C13 CLIN_108C14 CLIN_108C15 CLIN_108C16 CLIN_108C17 CLIN_108C18 CLIN_108C19 CLIN_108C20 CLIN_108C21 CLIN_108C22 CLIN_108C23 CLIN_108C24 CLIN_108C25 CLIN_108CW709A_2626 CLIN_108C27 CLIN_108C28 CLIN_108C96 CLIN_108C88 CLIN_108C99 CLIN_108C0 CLIN_108Cextra CLIN_108C_O

foreach i of numlist 0/21 96{
	gen reason`i' = .
}

foreach i of numlist 3/6 9 18/20{
    replace reason`i' = CLIN_107C`i' if mi(reason`i')
}

foreach i of numlist 2 3 5 9 11 13 17 18{
    replace reason`i' = CLIN_108C`i' if mi(reason`i')
}


foreach i of numlist 1/5 7/9 11 13 16/19 96{
    replace reason`i' = HOME_111D`i' if mi(reason`i')
}

foreach i of numlist 0/5 8 15 11/13 16/19 21 96{
	replace reason`i' = PHO_111D`i'  if mi(reason`i')
}

sum reason1-reason21 reason96, separator(21)
